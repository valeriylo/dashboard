# Dashboard

## Этапы проекта

### 1. ~~Создать репозиторий проекта и установить себе git~~

1. Зарегистрируйтесь на сайте [https://github.com](GitHub), чтобы создать свой первый репозиторий с кодом.
2. Создайте новый репозиторий, указав нужное имя. Добавьте галочки для создания README.md файла, а также выберите шаблон файла `.gitignore` для `Python`.
3. На своем ПК установите утилиту `git` с этого ресурса [https://git-scm.com] для ОС Windows. Для Linux/macOS используйте команды `apt-get install git` и `brew install git` соответственно.
4. Выберете удобное расположения для директории проекта, перейдите в эту директории через командную строку или терминал командой `cd <путь к директории>` и, скопировав ссылку на ваш созданный репозиторий из поисковой строки, выполните команду `git clone <ссылка на репозиторий>. Ссылка не должна содержать информации о ветках, иметь формат вида [https://github.com/valeriylo/dashboard].
5. Если все прошло успешно у Вас появится директория с именем Вашего репозитория

#### Возможные проблемы и их решение
* Если на OC Windows у Вас не найдена команда `git` после установки или она доступна только из директории, где находятся файлы установки `git` (например `C:\Program Files\Git\bin`), то необходимо добавить эту команду в PATH путь системы. \
Эта переменная содержит различные команды и путь к их исполняемым файлам, чтобы они были доступны в любой директории ОС.
Для этого:
    1. Откройте командную строку (cmd)
    2. Выполните команду `set PATH=%PATH%;"C:\Program Files\Git\bin"` (или другой путь к исполняемым файлам git)
    3. Перезапустите командную строку


### 2. ~~Сделать первый commit~~
После того как Вы создали репозиторий и склонировали его на свой ПК, необходимо указать имя и email для коммитов.
Для этого:
1. Выполните команду `git config --global user.name "Ваше имя"`
2. Выполните команду `git config --global user.email "Ваш email"`
Указывайте username и email в соответствии с Вашим username и email при регистрации на GitHub.

Теперь создадим любое изменение в файле README.md и сделаем первый commit.
В целом, есть два способа работы с git:
1. Через командную строку (терминал)
2. Через графический интерфейс Вашего IDE (например PyCharm, VSCode, etc)

Для того чтобы сделать commit через терминал, выполните следующие команды:
1. `git add README.md` - добавляет файл README.md в индекс для коммита
2. `git commit -m "Ваш комментарий к коммиту"` - создает коммит с указанным комментарием
3. `git push` - отправляет коммит на сервер GitHub

Инструкции по работе с git через Ваш IDE можно найти в интернете, для VSCode рекомендуется дополнительно использовать расширение GitLens.

После выполнения команды `git push` Вам нужно будет авторизоваться на GitHub и сгенерировать токен для доступа к репозиторию. Для этого либо следуйте инструкциям утилиты Git, либо на GitHub в разделе `Settings` -> `Developer settings` -> `Personal access tokens` -> `Generate new token` создайте токен с правами `repo` и `workflow`. Введите этот токен в качестве пароля при авторизации на GitHub через терминал.

Если все прошло успешно, то Вы увидите в терминале сообщение о том, что коммит был успешно отправлен на сервер GitHub и в интерфейсе GitHub появится сообщение о том, что в репозитории появились новые изменения.

### 3. Научиться работать с Docker

Установить Docker Desktop для Windows можно с этого ресурса [https://www.docker.com/products/docker-desktop/].
Для Linux/macOS используйте команды `apt-get install docker` и `brew install docker` соответственно.

После установки Docker Desktop, откройте его, убедитесь что в нижнем левом углу появилась надпись `docker engine is running`.

Проверьте, что Docker работает, выполнив команду `docker ps` в терминале. Если Docker работает, то в терминале появятся строки с информацией о запущенных контейнерах.

Основные команды для работы с Docker:
- `docker ps` - список запущенных контейнеров
- `docker pull <имя_контейнера>` - скачать образ контейнера с Docker Hub
- `docker run <имя_контейнера>` - запустить контейнер
- `docker stop <имя_контейнера>` - остановить контейнер
- `docker rm <имя_контейнера>` - удалить контейнер
- `docker rmi <имя_контейнера>` - удалить образ контейнера

### 4. Создать контейнер с базой данных и загрузить `.csv`

1. Создайте файл `Dockerfile` в корне проекта и добавьте в него код из этого файла в этом репозитории.
2. Создайте файл `init_db.sql` в корне проекта и добавьте в него код из этого файла в этом репозитории.
3. Создайте файл `daemon.sh` в корне проекта и добавьте в него код из этого файла в этом репозитории.
4. Убедитесь, что в директории проекта находится файл `./data/HH_data_DA.csv`
5. Выполните команду `docker build -t mysql .` для сборки контейнера
6. После сборки контейнера дайте права на выполнение файла `daemon.sh` командой `chmod +x daemon.sh`
7. Выполните команду `./daemon.sh` для запуска контейнера
8. После запуска контейнера он появится в списке запущенных контейнеров в приложении Docker Desktop. Логи контейнера можно посмотреть в созданном файле `mysql-container.log`.
### 5. Научиться к ней общаться через python и SQL редакторы

1. Убедитесь, что у Вас установлен Python и pip. В противном случае установите Python из Microsoft Store или с официального сайта [https://www.python.org/downloads/].
2. Создайте в директории проекта виртуальное окружение командой `python -m venv .venv`
3. Активируйте виртуальное окружение командой `.\.venv\Scripts\activate`
4. Установите зависимости командой `pip install -r requirements.txt`
5. Создайте файл `.env` в корне проекта и добавьте в него код из этого файла в этом репозитории.
6. Создайте файл `query_db.py` в корне проекта и добавьте в него код из этого файла в этом репозитории.
7. Выполните команду `python query_db.py` для запуска скрипта
8. После запуска у Вас появится файл `./results/directory_count.png` в корне проекта с примером работы SQL запроса к базе данных.

### 6. Научиться работать с Superset

1. Перейдите по адресу, предоставленному преподавателем
2. Введите логин и пароль, предоставленные преподавателем
3. Вы увидите главную страницу Superset
4. В верхнем правом углу нажмите на кнопку `+` и выберите `Dashboard`
5. Введите название дашборда `Dashboard_Фамилия_ИО`
6. Выберите вкладку `Chart` и создайте новый график
7. Создайте не менее 5 графиков и расположите их на Dashboard